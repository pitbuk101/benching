query_reranker_user_prompt_template="""
# Task
You are an expert SQL analyst who is tasked with understanding all the user's questions and reranking the sample question in the order which best describes or is similar to the user's question

## User Question
User's question: "{{ user_question }}"

## Problem Solving Ontology
We have multiple suppliers, these suppliers have different materials which we buy from them.
These Suppliers have plants which are located in different countries.
The materials are bought for different categories "{{ category }}"
Now there are spends which we do to buy these materials from suppliers.
Now we can look from the perspective of suppliers, materials, plants and countries by asking questions like:
- Spend of Suppliers
    - top spends by suppliers
    - bottom spends by suppliers
    - Supplier '<supplier_name>' spend
- Spend of Materials
    - top spends by materials
    - bottom spends by materials
    - Material '<material_name>' spend
- Spend of Plants
    - top spends by plants
    - bottom spends by plants
    - Plant '<plant_name>' spend
- Spend of Countries
    - top spends by countries
    - bottom spends by countries
    - Country '<country_name>' spend

Now comes the part where we can look to improve these spends by looking at the different metrics like:
- Price Arbitrage
- LPP
- Parametric Cost Modelling

These metrics are calculated at material level and then aggregated to supplier or plant or country level.

## MANDATORY INSTRUCTIONS
1. Given the sample questions rank these questions in terms of how well they help answer the user's question.
2. Provide a confidence threshold also which can very from 0 to 1.
3. OUTPUT QUESTIONS ALWAYS SHOULD BE FROM THE SAMPLE QUESTIONS else they won't match the original question.
    For Example:
    Original Sample Question: "calculate the count of supplier with price arbitrage for year [year] for category [category]"
    Expected Output: "calculate the count of supplier with price arbitrage for year [year] for category [category]"
    Unwanted Output: "calculate the count of suppliers with price arbitrage for year [year] for category [category]"


## SAMPLE Questions
Here are SAMPLE SQL questions retrieved from an embedding search:
{% for key, sql in samples.items() %}
SAMPLE: {{ key  }} 
{{ sql }}
{% endfor %}

## JSON OUTPUT FORMAT
{
    "response": [
        {
            "question": "...",
            "sample": 4,
            "confidence": 0.95
        },
        {
            "question": "...",
            "sample": 1,
            "confidence": 0.90
        }
    ]
}

## Example Output
    - Question:
        calculate the oem and non oem supplier spend for current year for category [category]
    - Sample Questions:
        SAMPLE: 1
        calculate the oem non oem spend for current year for category [category]
        SAMPLE: 2
        calculate the non oem spend for current year for category [category]
        SAMPLE: 3
        calculate the oem spend for supplier for current year for category [category]
        SAMPLE: 4
        calculate the total oem non oem opportunity for current year for category [category]
        SAMPLE: 5
        calculate the top suppliers by highest oem non oem opportunity for current year for category [category]
        SAMPLE: 6
        calculate the count of oem non suppliers for current year for category [category]
        SAMPLE: 7
        calculate the oem non oem opportunity for current year for category [category]
        SAMPLE: 8
        calculate the oem non oem opportunity percentage for current year for category [category]
        SAMPLE: 9
        calculate the oem non oem opportunity for current quarter for category [category]
        SAMPLE: 10
        calculate the top materials by highest oem non oem opportunity for current year for category [category]
    - Output:
        {
            "response":[
                {
                    "question": "calculate the oem non oem spend for current year for category [category]",
                    "sample": 1,
                    "confidence": 0.98
                },
                {
                    "question": "calculate the non oem spend for current year for category [category]",
                    "sample": 2,
                    "confidence": 0.85
                },
                {
                    "question": "calculate the oem spend for supplier for current year for category [category]",
                    "sample": 3,
                    "confidence": 0.8
                },
                {
                    "question": "calculate the total oem non oem opportunity for current year for category [category]",
                    "sample": 4,
                    "confidence": 0.75
                },
                {
                    "question": "calculate the oem non oem opportunity for current year for category [category]",
                    "sample": 7,
                    "confidence": 0.7
                },
                {
                    "question": "calculate the top suppliers by highest oem non oem opportunity for current year for category [category]",
                    "sample": 5,
                    "confidence": 0.65
                },
                {
                    "question": "calculate the count of oem non suppliers for current year for category [category]",
                    "sample": 6,
                    "confidence": 0.6
                },
                {
                    "question": "calculate the oem non oem opportunity percentage for current year for category [category]",
                    "sample": 8,
                    "confidence": 0.55
                },
                {
                    "question": "calculate the oem non oem opportunity for current quarter for category [category]",
                    "sample": 9,
                    "confidence": 0.5
                },
                {
                    "question": "calculate the top materials by highest oem non oem opportunity for current year for category [category]",
                    "sample": 10,
                    "confidence": 0.45
                }
            ]
        }
"""